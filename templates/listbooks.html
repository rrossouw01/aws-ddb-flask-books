{% extends "base.html" %}
{% block title %}Authors{% endblock %}
{% block content %}
    <label for="authors">Choose an author:</label>

    <select name="authors" id="authors" class="form-select">
      <option value="0">All</option>
      <option value="1">Riaan Rossouw</option>
      <option value="2">Agatha Christie</option>
    </select>

    <div id="books">
    <table class="table table-striped table-sm">
        <thead>
            <tr>
              <th scope="col">Book Id</th>
              <th scope="col">Title</th>
              <th scope="col">Author Id</th>
            </tr>
          </thead>
          <tbody>
            {% for item in items %}
            <tr>
              <td><a href="{{ url_for('getBook',id=item.id) }}">{{item.id}}</a></td>
              <td>{{item.title}}</td>
              <td>{{item.author_id}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    </div>
    {% block javascript %}
    <script>
        document.getElementById("authors").onchange = function() {
        var author_id = document.getElementById("authors").value;
        url = "{{ url_for('list_books',id=0) }}";
        url = url.substr(0, url.lastIndexOf("/"));
        //console.log(url + '/' + author_id);
        window.location.href = url + '/' + author_id;
        };
    </script>
    {% endblock %}
{% endblock %}
